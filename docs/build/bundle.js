var app=function(){"use strict";function e(){}function n(e){return e()}function t(){return Object.create(null)}function l(e){e.forEach(n)}function o(e){return"function"==typeof e}function u(e,n){return e!=e?n==n:e!==n||e&&"object"==typeof e||"function"==typeof e}function c(e,n){e.appendChild(n)}function r(e,n,t){e.insertBefore(n,t||null)}function i(e){e.parentNode.removeChild(e)}function s(e,n){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(n)}function a(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function p(){return d(" ")}function f(e,n,t,l){return e.addEventListener(n,t,l),()=>e.removeEventListener(n,t,l)}function m(e,n,t){null==t?e.removeAttribute(n):e.getAttribute(n)!==t&&e.setAttribute(n,t)}function h(e,n){n=""+n,e.wholeText!==n&&(e.data=n)}let y;function b(e){y=e}const w=[],q=[],g=[],v=[],$=Promise.resolve();let k=!1;function x(e){g.push(e)}const _=new Set;let C=0;function E(){const e=y;do{for(;C<w.length;){const e=w[C];C++,b(e),F(e.$$)}for(b(null),w.length=0,C=0;q.length;)q.pop()();for(let e=0;e<g.length;e+=1){const n=g[e];_.has(n)||(_.add(n),n())}g.length=0}while(w.length);for(;v.length;)v.pop()();k=!1,_.clear(),b(e)}function F(e){if(null!==e.fragment){e.update(),l(e.before_update);const n=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,n),e.after_update.forEach(x)}}const B=new Set;function A(e,n){-1===e.$$.dirty[0]&&(w.push(e),k||(k=!0,$.then(E)),e.$$.dirty.fill(0)),e.$$.dirty[n/31|0]|=1<<n%31}function T(u,c,r,s,a,d,p,f=[-1]){const m=y;b(u);const h=u.$$={fragment:null,ctx:null,props:d,update:e,not_equal:a,bound:t(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(m?m.$$.context:[])),callbacks:t(),dirty:f,skip_bound:!1,root:c.target||m.$$.root};p&&p(h.root);let w=!1;if(h.ctx=r?r(u,c.props||{},((e,n,...t)=>{const l=t.length?t[0]:n;return h.ctx&&a(h.ctx[e],h.ctx[e]=l)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](l),w&&A(u,e)),n})):[],h.update(),w=!0,l(h.before_update),h.fragment=!!s&&s(h.ctx),c.target){if(c.hydrate){const e=function(e){return Array.from(e.childNodes)}(c.target);h.fragment&&h.fragment.l(e),e.forEach(i)}else h.fragment&&h.fragment.c();c.intro&&((q=u.$$.fragment)&&q.i&&(B.delete(q),q.i(g))),function(e,t,u,c){const{fragment:r,on_mount:i,on_destroy:s,after_update:a}=e.$$;r&&r.m(t,u),c||x((()=>{const t=i.map(n).filter(o);s?s.push(...t):l(t),e.$$.on_mount=[]})),a.forEach(x)}(u,c.target,c.anchor,c.customElement),E()}var q,g;b(m)}const j={z:{row:1,column:1},x:{row:1,column:2},c:{row:1,column:3},v:{row:1,column:4},b:{row:1,column:5},n:{row:1,column:6},m:{row:1,column:7},",":{row:1,column:8},".":{row:1,column:9},"/":{row:1,column:10},a:{row:2,column:1},s:{row:2,column:2},d:{row:2,column:3},f:{row:2,column:4},g:{row:2,column:5},h:{row:2,column:6},j:{row:2,column:7},k:{row:2,column:8},l:{row:2,column:9},";":{row:2,column:10},"'":{row:2,column:11},w:{row:3,column:1},e:{row:3,column:2},r:{row:3,column:3},t:{row:3,column:4},y:{row:3,column:5},u:{row:3,column:6},i:{row:3,column:7},o:{row:3,column:8},p:{row:3,column:9},"[":{row:3,column:10}},M=[16.35,32.7,65.41,130.81,261.63,523.25,1046.5,2093,4186.01],D=[17.32,34.65,69.3,138.59,277.18,554.37,1108.73,2217.46,4434.92],G=[18.35,36.71,73.42,146.83,293.66,587.33,1174.66,2349.32,4698.64],L=[19.45,38.89,77.78,155.56,311.13,622.25,1244.51,2489.02,4978.03],O=[20.6,41.2,82.41,164.81,329.63,659.26,1318.51,2637.02],H=[21.83,43.65,87.31,174.61,349.23,698.46,1396.91,2793.83],N=[23.12,46.25,92.5,185,369.99,739.99,1479.98,2959.96],P=[24.5,49,98,196,392,783.99,1567.98,3135.96],R=[25.96,51.91,103.83,207.65,415.3,830.61,1661.22,3322.44],S=[27.5,55,110,220,440,880,1760,3520],z=[29.14,58.27,116.54,233.08,466.16,932.33,1864.66,3729.31],K=[30.87,61.74,123.47,246.94,493.88,987.77,1975.53,3951.07],I=[{id:"1-1-pull",name:"D♭",frequency:D[4]},{id:"1-2-pull",name:"G",frequency:P[3]},{id:"1-3-pull",name:"B♭",frequency:z[3]},{id:"1-4-pull",name:"D",frequency:G[4]},{id:"1-5-pull",name:"E",frequency:O[4]},{id:"1-6-pull",name:"G",frequency:P[4]},{id:"1-7-pull",name:"B♭",frequency:z[4]},{id:"1-8-pull",name:"D",frequency:G[5]},{id:"1-9-pull",name:"E",frequency:O[5]},{id:"1-10-pull",name:"G",frequency:P[5]},{id:"1-1-push",name:"B",frequency:K[3]},{id:"1-2-push",name:"F",frequency:H[3]},{id:"1-3-push",name:"A",frequency:S[3]},{id:"1-4-push",name:"C",frequency:M[4]},{id:"1-5-push",name:"F",frequency:H[4]},{id:"1-6-push",name:"A",frequency:S[4]},{id:"1-7-push",name:"C",frequency:M[5]},{id:"1-8-push",name:"F",frequency:H[5]},{id:"1-9-push",name:"A",frequency:S[5]},{id:"1-10-push",name:"C",frequency:M[6]}],J=[{id:"2-1-pull",name:"F♯",frequency:N[4]},{id:"2-2-pull",name:"A",frequency:S[3]},{id:"2-3-pull",name:"C",frequency:M[4]},{id:"2-4-pull",name:"E♭",frequency:L[4]},{id:"2-5-pull",name:"G",frequency:P[4]},{id:"2-6-pull",name:"A",frequency:S[4]},{id:"2-7-pull",name:"C",frequency:M[5]},{id:"2-8-pull",name:"E♭",frequency:L[5]},{id:"2-9-pull",name:"G",frequency:P[5]},{id:"2-10-pull",name:"A",frequency:S[5]},{id:"2-11-pull",name:"C",frequency:M[6]},{id:"2-1-push",name:"E",frequency:O[4]},{id:"2-2-push",name:"F",frequency:H[3]},{id:"2-3-push",name:"B♭",frequency:z[3]},{id:"2-4-push",name:"D",frequency:G[4]},{id:"2-5-push",name:"F",frequency:H[4]},{id:"2-6-push",name:"B♭",frequency:z[4]},{id:"2-7-push",name:"D",frequency:G[5]},{id:"2-8-push",name:"F",frequency:H[5]},{id:"2-9-push",name:"B♭",frequency:z[5]},{id:"2-10-push",name:"D",frequency:G[6]},{id:"2-11-push",name:"F",frequency:H[6]}],Q=[{id:"3-1-pull",name:"B",frequency:K[4]},{id:"3-2-pull",name:"D",frequency:G[4]},{id:"3-3-pull",name:"F",frequency:H[4]},{id:"3-4-pull",name:"A♭",frequency:R[4]},{id:"3-5-pull",name:"C",frequency:M[5]},{id:"3-6-pull",name:"D",frequency:G[5]},{id:"3-7-pull",name:"F",frequency:H[5]},{id:"3-8-pull",name:"A♭",frequency:R[5]},{id:"3-9-pull",name:"C",frequency:M[6]},{id:"3-10-pull",name:"D",frequency:G[6]},{id:"3-1-push",name:"D♭",frequency:D[4]},{id:"3-2-push",name:"B♭",frequency:z[3]},{id:"3-3-push",name:"E♭",frequency:L[4]},{id:"3-4-push",name:"G",frequency:P[4]},{id:"3-5-push",name:"B♭",frequency:z[4]},{id:"3-6-push",name:"E♭",frequency:L[5]},{id:"3-7-push",name:"G",frequency:P[5]},{id:"3-8-push",name:"B♭",frequency:z[5]},{id:"3-9-push",name:"E♭",frequency:L[6]},{id:"3-10-push",name:"G",frequency:P[6]}],U={F:{notes:[["3-3-pull"],["1-6-pull"],["2-6-pull"],["1-7-pull"],["2-7-pull"],["3-6-pull"],["1-9-pull"],["3-7-pull"]],thirds:[["2-6-pull","3-3-pull"],["1-6-pull","1-7-pull"],["2-6-pull","2-7-pull"],["1-7-pull","1-8-pull"],["1-9-pull","2-7-pull"],["3-7-pull","3-6-pull"],["1-9-pull","1-10-pull"],["2-10-pull","3-7-pull"]]},Bb:{notes:[["1-3-pull"],["2-3-pull"],["3-2-pull"],["2-4-pull"],["3-3-pull"],["1-6-pull"],["2-6-pull"],["1-7-pull"]],thirds:[["1-3-pull","1-4-pull"],["2-3-pull","2-4-pull"],["3-2-pull","3-3-pull"],["2-4-pull","2-5-pull"],["3-3-pull","2-6-pull"],["1-6-pull","1-7-pull"],["2-6-pull","2-7-pull"],["1-7-pull","1-8-pull"]]},Eb:{notes:[["2-4-pull"],["3-3-pull"],["2-5-pull"],["3-4-pull"],["1-7-pull"],["2-7-pull"],["3-6-pull"],["2-8-pull"]],thirds:[["2-5-pull","2-4-pull"],["3-3-pull","3-4-pull"],["2-5-pull","1-7-pull"],["3-4-pull","3-5-pull"],["1-7-pull","1-8-pull"],["2-7-pull","2-8-pull"],["3-6-pull","3-7-pull"],["2-8-pull","2-9-pull"]]}},V={one:I,two:J,three:Q},W=[...I,...J,...Q].reduce(((e,n)=>({...e,[n.id]:n})),{}),X={FBE:{one:"F",two:"B♭",three:"E♭"}},Y=Object.values({1:"one",2:"two",3:"three"});function Z(e,n,t){const l=e.slice();return l[17]=n[t],l}function ee(e,n,t){const l=e.slice();return l[20]=n[t],l}function ne(e,n,t){const l=e.slice();return l[23]=n[t][0],l[24]=n[t][1],l}function te(e){let n,t,l,o,u,s,f,y,b,w,q,g,v=e[24].name+"",$=e[23].split("-")[0]+"",k=e[23].split("-")[1]+"";return{c(){n=a("div"),t=a("div"),l=d(v),o=p(),u=a("div"),s=a("small"),f=d("Row: "),y=d($),b=a("br"),w=d(" Col: "),q=d(k),g=p(),m(t,"class","circle note"),m(n,"class","flex col")},m(e,i){r(e,n,i),c(n,t),c(t,l),c(n,o),c(n,u),c(u,s),c(s,f),c(s,y),c(s,b),c(s,w),c(s,q),c(n,g)},p(e,n){4&n&&v!==(v=e[24].name+"")&&h(l,v),4&n&&$!==($=e[23].split("-")[0]+"")&&h(y,$),4&n&&k!==(k=e[23].split("-")[1]+"")&&h(q,k)},d(e){e&&i(n)}}}function le(e){let n,t,l,u,s,p,y=e[20].name+"";return{c(){n=a("div"),t=d(y),m(n,"class",l=`circle ${e[2][e[20].id]?"active":""} ${e[0]} `),m(n,"id",u=e[20].id)},m(l,u){r(l,n,u),c(n,t),s||(p=f(n,"mousedown",(function(){o(e[6](e[20].id))&&e[6](e[20].id).apply(this,arguments)})),s=!0)},p(o,c){e=o,1&c&&y!==(y=e[20].name+"")&&h(t,y),5&c&&l!==(l=`circle ${e[2][e[20].id]?"active":""} ${e[0]} `)&&m(n,"class",l),1&c&&u!==(u=e[20].id)&&m(n,"id",u)},d(e){e&&i(n),s=!1,p()}}}function oe(e){let n,t,l,o,u,f,y,b,w=X[e[1]][e[17]]+"",q=e[17]+"",g=V[e[17]].filter(e[9]),v=[];for(let n=0;n<g.length;n+=1)v[n]=le(ee(e,g,n));return{c(){n=a("div"),t=a("h4"),l=d(w),o=a("br"),u=d(q),f=p();for(let e=0;e<v.length;e+=1)v[e].c();y=p(),m(n,"class",b="row "+e[17])},m(e,i){r(e,n,i),c(n,t),c(t,l),c(t,o),c(t,u),c(n,f);for(let e=0;e<v.length;e+=1)v[e].m(n,null);c(n,y)},p(e,t){if(2&t&&w!==(w=X[e[1]][e[17]]+"")&&h(l,w),69&t){let l;for(g=V[e[17]].filter(e[9]),l=0;l<g.length;l+=1){const o=ee(e,g,l);v[l]?v[l].p(o,t):(v[l]=le(o),v[l].c(),v[l].m(n,y))}for(;l<v.length;l+=1)v[l].d(1);v.length=g.length}},d(e){e&&i(n),s(v,e)}}}function ue(n){let t,o,u,y,b,w,q,g,v,$,k,x,_,C,E,F,B,A,T,j,M,D,G,L,O,H,N,P,R,S,z,K,I,J,Q,U,V,W,X,ee,le,ue,ce,re,ie,se,ae,de,pe,fe,me,he,ye,be,we,qe,ge,ve,$e,ke,xe,_e,Ce,Ee,Fe,Be,Ae,Te,je=Object.entries(n[2]),Me=[];for(let e=0;e<je.length;e+=1)Me[e]=te(ne(n,je,e));let De=Y,Ge=[];for(let e=0;e<De.length;e+=1)Ge[e]=oe(Z(n,De,e));return{c(){t=p(),o=a("main"),u=a("div"),y=a("div"),b=a("h1"),b.textContent="Keyboard Accordion",w=p(),q=a("h2"),q.textContent="Play the diatonic button accordion with your computer keyboard!",g=p(),v=a("div"),$=a("div"),$.innerHTML="<h3>How to use</h3> \n          <ul><li>Hold down <kbd>1</kbd> to push the bellows. Default is pull.</li> \n            <li>Row 1 starts with <kbd>z</kbd> and ends with <kbd>,</kbd> (comma)</li> \n            <li>Row 2 starts with <kbd>a</kbd> and ends with <kbd>&#39;</kbd> (apostrophe)</li> \n            <li>Row 3 starts with <kbd>w</kbd> and ends with <kbd>[</kbd> (left bracket)</li></ul>",k=p(),x=a("div"),_=a("div"),C=a("h3"),C.textContent="Tuning",E=p(),F=a("select"),B=a("option"),B.innerHTML="<h2>FB♭E♭ (Fa)</h2>",A=a("option"),A.innerHTML="<h2>GCF (Sol) Not yet</h2>",T=a("option"),T.innerHTML="<h2>EAD (Mi) Not yet</h2>",j=p(),M=a("div"),D=a("h3"),D.textContent="Major Scales",G=p(),L=a("div"),O=a("div"),H=a("h4"),H.textContent="F Major",N=p(),P=a("div"),R=a("button"),R.textContent="Notes",S=p(),z=a("button"),z.textContent="Thirds",K=p(),I=a("div"),J=a("h4"),J.textContent="B♭ Major",Q=p(),U=a("div"),V=a("button"),V.textContent="Notes",W=p(),X=a("button"),X.textContent="Thirds",ee=p(),le=a("div"),ue=a("h4"),ue.textContent="E♭ Major",ce=p(),re=a("div"),ie=a("button"),ie.textContent="Notes",se=p(),ae=a("button"),ae.textContent="Thirds",de=p(),pe=a("div"),fe=a("div"),me=a("h3"),me.textContent="Notes being played",he=p(),ye=a("div");for(let e=0;e<Me.length;e+=1)Me[e].c();be=p(),we=a("div"),qe=a("div"),qe.innerHTML='<div class="banner">This app is only available on a desktop!</div>',ge=p(),ve=a("h2"),$e=d(n[0]),xe=p(),_e=a("div");for(let e=0;e<Ge.length;e+=1)Ge[e].c();var e,l,c,r;Ce=p(),Ee=a("div"),Ee.innerHTML="<h4>Bellows <code>➔</code></h4>",Fe=p(),Be=a("footer"),Be.innerHTML='<p>Made with 💾 by <a href="https://tania.dev" target="_blank">Tania</a>.<br/> \n      <a href="https://github.com/taniarascia/accordion" target="_blank">Open source</a>.</p>',B.__value="FBE",B.value=B.__value,B.selected=!0,A.__value="GCF",A.value=A.__value,A.disabled=!0,T.__value="EAD",T.value=T.__value,T.disabled=!0,m(x,"class","flex"),m(O,"class","scale"),m(I,"class","scale"),m(le,"class","scale"),m(L,"class","scales"),m(v,"class","information"),m(ye,"class","currently-playing"),m(pe,"class","information desktop-only"),m(y,"class","information-side"),m(qe,"class","mobile-only"),m(ve,"class",ke="desktop-only direction "+n[0]),m(_e,"class","desktop-only accordion-layout"),m(Ee,"class","desktop-only"),e=Ee,l="justify-content",null===(c="flex-end")?e.style.removeProperty(l):e.style.setProperty(l,c,r?"important":""),m(we,"class","keyboard-side"),m(u,"class","layout")},m(e,l){r(e,t,l),r(e,o,l),c(o,u),c(u,y),c(y,b),c(y,w),c(y,q),c(y,g),c(y,v),c(v,$),c(v,k),c(v,x),c(x,_),c(_,C),c(_,E),c(_,F),c(F,B),c(F,A),c(F,T),c(v,j),c(v,M),c(M,D),c(M,G),c(M,L),c(L,O),c(O,H),c(O,N),c(O,P),c(P,R),c(P,S),c(P,z),c(L,K),c(L,I),c(I,J),c(I,Q),c(I,U),c(U,V),c(U,W),c(U,X),c(L,ee),c(L,le),c(le,ue),c(le,ce),c(le,re),c(re,ie),c(re,se),c(re,ae),c(y,de),c(y,pe),c(pe,fe),c(fe,me),c(fe,he),c(fe,ye);for(let e=0;e<Me.length;e+=1)Me[e].m(ye,null);c(u,be),c(u,we),c(we,qe),c(we,ge),c(we,ve),c(ve,$e),c(we,xe),c(we,_e);for(let e=0;e<Ge.length;e+=1)Ge[e].m(_e,null);c(we,Ce),c(we,Ee),c(o,Fe),c(o,Be),Ae||(Te=[f(document.body,"keypress",n[4]),f(document.body,"keyup",n[5]),f(document.body,"mouseup",n[7]),f(F,"click",n[3]),f(R,"click",n[8]("F","notes")),f(z,"click",n[8]("F","thirds")),f(V,"click",n[8]("Bb","notes")),f(X,"click",n[8]("Bb","thirds")),f(ie,"click",n[8]("Eb","notes")),f(ae,"click",n[8]("Eb","thirds"))],Ae=!0)},p(e,[n]){if(4&n){let t;for(je=Object.entries(e[2]),t=0;t<je.length;t+=1){const l=ne(e,je,t);Me[t]?Me[t].p(l,n):(Me[t]=te(l),Me[t].c(),Me[t].m(ye,null))}for(;t<Me.length;t+=1)Me[t].d(1);Me.length=je.length}if(1&n&&h($e,e[0]),1&n&&ke!==(ke="desktop-only direction "+e[0])&&m(ve,"class",ke),71&n){let t;for(De=Y,t=0;t<De.length;t+=1){const l=Z(e,De,t);Ge[t]?Ge[t].p(l,n):(Ge[t]=oe(l),Ge[t].c(),Ge[t].m(_e,null))}for(;t<Ge.length;t+=1)Ge[t].d(1);Ge.length=De.length}},i:e,o:e,d(e){e&&i(t),e&&i(o),s(Me,e),s(Ge,e),Ae=!1,l(Te)}}}function ce(e,n,t){const l=new(window.AudioContext||window.webkitAudioContext),o=l.createGain();o.gain.value=.1,o.connect(l.destination);let u="pull",c="FBE",r={};function i(e){const{frequency:n}=W[e],t=l.createOscillator();return t.type="square",t.connect(o),t.frequency.value=n,t.start(),{oscillator:t}}function s(e){const{oscillator:n}=r[e];n.stop()}function a(e){if(u!==e){t(0,u=e);const n={...r};for(const[t,l]of Object.entries(r)){l.oscillator.stop(),delete n[t];const o=`${t.split("-")[0]}-${t.split("-")[1]}-${e}`,{oscillator:u}=i(o);n[o]={oscillator:u,...W[o]}}t(2,r=n)}}function d(e){if(console.log(e),!r[e]){const{oscillator:n}=i(e);t(2,r[e]={oscillator:n,...W[e]},r)}}async function p(e){for(const n of e)if(!r[n]){const{oscillator:e}=i(n);t(2,r[n]={oscillator:e,...W[n]},r)}var n;await(n=600,new Promise((e=>setTimeout(e,n))));for(const n of e){s(n);const e={...r};delete e[n],t(2,r=e)}}return[u,c,r,function(e){t(1,c=e.target.value)},function(e){if("1"===e.key)return void a("push");const n=`${e.key}`.toLowerCase()||e.key,t=j[n];if(t){const{row:e,column:n}=t;d(`${e}-${n}-${u}`)}},function(e){if("1"===e.key)return void a("pull");const n=`${e.key}`.toLowerCase()||e.key,l=j[n];if(l){const{row:e,column:n}=l,o=`${e}-${n}-${u}`;if(r[o]){s(o);const e={...r};delete e[o],t(2,r=e)}}},e=>{d(e)},()=>{for(const[e,n]of Object.entries(r))n.oscillator.stop();t(2,r={})},(e,n)=>async()=>{const t=[...U[e][n]].reverse();t.shift();const l=[...U[e][n],...t];for(const e of l)await p(e)},({id:e})=>e.includes(u)]}return new class extends class{$destroy(){!function(e,n){const t=e.$$;null!==t.fragment&&(l(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}(this,1),this.$destroy=e}$on(e,n){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{const e=t.indexOf(n);-1!==e&&t.splice(e,1)}}$set(e){var n;this.$$set&&(n=e,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}{constructor(e){super(),T(this,e,ce,ue,u,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map

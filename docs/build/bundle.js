var app=function(){"use strict";function e(){}function n(e){return e()}function t(){return Object.create(null)}function o(e){e.forEach(n)}function l(e){return"function"==typeof e}function u(e,n){return e!=e?n==n:e!==n||e&&"object"==typeof e||"function"==typeof e}function r(e,n){e.appendChild(n)}function c(e,n,t){e.insertBefore(n,t||null)}function i(e){e.parentNode.removeChild(e)}function a(e,n){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(n)}function s(e){return document.createElement(e)}function d(e){return document.createTextNode(e)}function f(){return d(" ")}function p(e,n,t,o){return e.addEventListener(n,t,o),()=>e.removeEventListener(n,t,o)}function m(e,n,t){null==t?e.removeAttribute(n):e.getAttribute(n)!==t&&e.setAttribute(n,t)}function h(e,n){n=""+n,e.wholeText!==n&&(e.data=n)}let y;function w(e){y=e}const q=[],b=[],g=[],v=[],$=Promise.resolve();let k=!1;function _(e){g.push(e)}const x=new Set;let C=0;function E(){const e=y;do{for(;C<q.length;){const e=q[C];C++,w(e),A(e.$$)}for(w(null),q.length=0,C=0;b.length;)b.pop()();for(let e=0;e<g.length;e+=1){const n=g[e];x.has(n)||(x.add(n),n())}g.length=0}while(q.length);for(;v.length;)v.pop()();k=!1,x.clear(),w(e)}function A(e){if(null!==e.fragment){e.update(),o(e.before_update);const n=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,n),e.after_update.forEach(_)}}const B=new Set;function T(e,n){-1===e.$$.dirty[0]&&(q.push(e),k||(k=!0,$.then(E)),e.$$.dirty.fill(0)),e.$$.dirty[n/31|0]|=1<<n%31}function D(u,r,c,a,s,d,f,p=[-1]){const m=y;w(u);const h=u.$$={fragment:null,ctx:null,props:d,update:e,not_equal:s,bound:t(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(m?m.$$.context:[])),callbacks:t(),dirty:p,skip_bound:!1,root:r.target||m.$$.root};f&&f(h.root);let q=!1;if(h.ctx=c?c(u,r.props||{},((e,n,...t)=>{const o=t.length?t[0]:n;return h.ctx&&s(h.ctx[e],h.ctx[e]=o)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](o),q&&T(u,e)),n})):[],h.update(),q=!0,o(h.before_update),h.fragment=!!a&&a(h.ctx),r.target){if(r.hydrate){const e=function(e){return Array.from(e.childNodes)}(r.target);h.fragment&&h.fragment.l(e),e.forEach(i)}else h.fragment&&h.fragment.c();r.intro&&((b=u.$$.fragment)&&b.i&&(B.delete(b),b.i(g))),function(e,t,u,r){const{fragment:c,on_mount:i,on_destroy:a,after_update:s}=e.$$;c&&c.m(t,u),r||_((()=>{const t=i.map(n).filter(l);a?a.push(...t):o(t),e.$$.on_mount=[]})),s.forEach(_)}(u,r.target,r.anchor,r.customElement),E()}var b,g;w(m)}const F={z:{row:1,column:1},x:{row:1,column:2},c:{row:1,column:3},v:{row:1,column:4},b:{row:1,column:5},n:{row:1,column:6},m:{row:1,column:7},",":{row:1,column:8},".":{row:1,column:9},"/":{row:1,column:10},a:{row:2,column:1},s:{row:2,column:2},d:{row:2,column:3},f:{row:2,column:4},g:{row:2,column:5},h:{row:2,column:6},j:{row:2,column:7},k:{row:2,column:8},l:{row:2,column:9},";":{row:2,column:10},"'":{row:2,column:11},w:{row:3,column:1},e:{row:3,column:2},r:{row:3,column:3},t:{row:3,column:4},y:{row:3,column:5},u:{row:3,column:6},i:{row:3,column:7},o:{row:3,column:8},p:{row:3,column:9},"[":{row:3,column:10}},G=[16.35,32.7,65.41,130.81,261.63,523.25,1046.5,2093,4186.01],L=[17.32,34.65,69.3,138.59,277.18,554.37,1108.73,2217.46,4434.92],j=[18.35,36.71,73.42,146.83,293.66,587.33,1174.66,2349.32,4698.64],M=[19.45,38.89,77.78,155.56,311.13,622.25,1244.51,2489.02,4978.03],O=[20.6,41.2,82.41,164.81,329.63,659.26,1318.51,2637.02],H=[21.83,43.65,87.31,174.61,349.23,698.46,1396.91,2793.83],N=[23.12,46.25,92.5,185,369.99,739.99,1479.98,2959.96],P=[24.5,49,98,196,392,783.99,1567.98,3135.96],S=[25.96,51.91,103.83,207.65,415.3,830.61,1661.22,3322.44],R=[27.5,55,110,220,440,880,1760,3520],z=[29.14,58.27,116.54,233.08,466.16,932.33,1864.66,3729.31],K=[30.87,61.74,123.47,246.94,493.88,987.77,1975.53,3951.07],I=[{id:"1-1-pull",name:"Dâ™­",frequency:L[4]},{id:"1-2-pull",name:"G",frequency:P[3]},{id:"1-3-pull",name:"Bâ™­",frequency:z[3]},{id:"1-4-pull",name:"D",frequency:j[4]},{id:"1-5-pull",name:"E",frequency:O[4]},{id:"1-6-pull",name:"G",frequency:P[4]},{id:"1-7-pull",name:"Bâ™­",frequency:z[4]},{id:"1-8-pull",name:"D",frequency:j[5]},{id:"1-9-pull",name:"E",frequency:O[5]},{id:"1-10-pull",name:"G",frequency:P[5]},{id:"1-1-push",name:"B",frequency:K[3]},{id:"1-2-push",name:"F",frequency:H[3]},{id:"1-3-push",name:"A",frequency:R[3]},{id:"1-4-push",name:"C",frequency:G[4]},{id:"1-5-push",name:"F",frequency:H[4]},{id:"1-6-push",name:"A",frequency:R[4]},{id:"1-7-push",name:"C",frequency:G[5]},{id:"1-8-push",name:"F",frequency:H[5]},{id:"1-9-push",name:"A",frequency:R[5]},{id:"1-10-push",name:"C",frequency:G[6]}],J=[{id:"2-1-pull",name:"Gâ™­",frequency:N[4]},{id:"2-2-pull",name:"A",frequency:R[3]},{id:"2-3-pull",name:"C",frequency:G[4]},{id:"2-4-pull",name:"Eâ™­",frequency:M[4]},{id:"2-5-pull",name:"G",frequency:P[4]},{id:"2-6-pull",name:"A",frequency:R[4]},{id:"2-7-pull",name:"C",frequency:G[5]},{id:"2-8-pull",name:"Eâ™­",frequency:M[5]},{id:"2-9-pull",name:"G",frequency:P[5]},{id:"2-10-pull",name:"A",frequency:R[5]},{id:"2-11-pull",name:"C",frequency:G[6]},{id:"2-1-push",name:"E",frequency:O[4]},{id:"2-2-push",name:"F",frequency:H[3]},{id:"2-3-push",name:"Bâ™­",frequency:z[3]},{id:"2-4-push",name:"D",frequency:j[4]},{id:"2-5-push",name:"F",frequency:H[4]},{id:"2-6-push",name:"Bâ™­",frequency:z[4]},{id:"2-7-push",name:"D",frequency:j[5]},{id:"2-8-push",name:"F",frequency:H[5]},{id:"2-9-push",name:"Bâ™­",frequency:z[5]},{id:"2-10-push",name:"D",frequency:j[6]},{id:"2-11-push",name:"F",frequency:H[6]}],Q=[{id:"3-1-pull",name:"B",frequency:K[4]},{id:"3-2-pull",name:"D",frequency:j[4]},{id:"3-3-pull",name:"F",frequency:H[4]},{id:"3-4-pull",name:"Aâ™­",frequency:S[4]},{id:"3-5-pull",name:"C",frequency:G[5]},{id:"3-6-pull",name:"D",frequency:j[5]},{id:"3-7-pull",name:"F",frequency:H[5]},{id:"3-8-pull",name:"Aâ™­",frequency:S[5]},{id:"3-9-pull",name:"C",frequency:G[6]},{id:"3-10-pull",name:"D",frequency:j[6]},{id:"3-1-push",name:"Dâ™­",frequency:L[4]},{id:"3-2-push",name:"Bâ™­",frequency:z[3]},{id:"3-3-push",name:"Eâ™­",frequency:M[4]},{id:"3-4-push",name:"G",frequency:P[4]},{id:"3-5-push",name:"Bâ™­",frequency:z[4]},{id:"3-6-push",name:"Eâ™­",frequency:M[5]},{id:"3-7-push",name:"G",frequency:P[5]},{id:"3-8-push",name:"Bâ™­",frequency:z[5]},{id:"3-9-push",name:"Eâ™­",frequency:M[6]},{id:"3-10-push",name:"G",frequency:P[6]}],U=[["1-3-pull","1-4-pull"],["2-3-pull","2-4-pull"],["3-2-pull","3-3-pull"],["2-4-pull","2-5-pull"],["3-3-pull","2-6-pull"],["1-6-pull","1-7-pull"],["2-6-pull","2-7-pull"],["1-7-pull","1-8-pull"]],V={one:I,two:J,three:Q},W=[...I,...J,...Q].reduce(((e,n)=>({...e,[n.id]:n})),{}),X=Object.values({1:"one",2:"two",3:"three"});function Y(e,n,t){const o=e.slice();return o[15]=n[t],o}function Z(e,n,t){const o=e.slice();return o[18]=n[t],o}function ee(e,n,t){const o=e.slice();return o[21]=n[t][0],o[22]=n[t][1],o}function ne(e){let n,t,o,l,u,a,p,y,w,q,b,g,v=e[22].name+"",$=e[21].split("-")[0]+"",k=e[21].split("-")[1]+"";return{c(){n=s("div"),t=s("div"),o=d(v),l=f(),u=s("div"),a=s("small"),p=d("Row: "),y=d($),w=s("br"),q=d(" Col: "),b=d(k),g=f(),m(t,"class","circle note"),m(n,"class","flex col")},m(e,i){c(e,n,i),r(n,t),r(t,o),r(n,l),r(n,u),r(u,a),r(a,p),r(a,y),r(a,w),r(a,q),r(a,b),r(n,g)},p(e,n){2&n&&v!==(v=e[22].name+"")&&h(o,v),2&n&&$!==($=e[21].split("-")[0]+"")&&h(y,$),2&n&&k!==(k=e[21].split("-")[1]+"")&&h(b,k)},d(e){e&&i(n)}}}function te(e){let n,t,o,u,a,f,y=e[18].name+"";return{c(){n=s("div"),t=d(y),m(n,"class",o="circle "+(e[1][e[18].id]?"active":"")),m(n,"id",u=e[18].id)},m(o,u){c(o,n,u),r(n,t),a||(f=p(n,"mousedown",(function(){l(e[4](e[18].id))&&e[4](e[18].id).apply(this,arguments)})),a=!0)},p(l,r){e=l,1&r&&y!==(y=e[18].name+"")&&h(t,y),3&r&&o!==(o="circle "+(e[1][e[18].id]?"active":""))&&m(n,"class",o),1&r&&u!==(u=e[18].id)&&m(n,"id",u)},d(e){e&&i(n),a=!1,f()}}}function oe(e){let n,t,o,l,u,p,h=e[15]+"",y=V[e[15]].filter(e[7]),w=[];for(let n=0;n<y.length;n+=1)w[n]=te(Z(e,y,n));return{c(){n=s("div"),t=s("h4"),o=d(h),l=f();for(let e=0;e<w.length;e+=1)w[e].c();u=f(),m(n,"class",p="row "+e[15])},m(e,i){c(e,n,i),r(n,t),r(t,o),r(n,l);for(let e=0;e<w.length;e+=1)w[e].m(n,null);r(n,u)},p(e,t){if(19&t){let o;for(y=V[e[15]].filter(e[7]),o=0;o<y.length;o+=1){const l=Z(e,y,o);w[o]?w[o].p(l,t):(w[o]=te(l),w[o].c(),w[o].m(n,u))}for(;o<w.length;o+=1)w[o].d(1);w.length=y.length}},d(e){e&&i(n),a(w,e)}}}function le(n){let t,l,u,y,w,q,b,g,v,$,k,_,x,C,E,A,B,T,D,F,G,L,j,M,O,H,N,P,S,R,z,K,I,J,Q,U,V,W,Z,te,le,ue,re,ce,ie=Object.entries(n[1]),ae=[];for(let e=0;e<ie.length;e+=1)ae[e]=ne(ee(n,ie,e));let se=X,de=[];for(let e=0;e<se.length;e+=1)de[e]=oe(Y(n,se,e));return{c(){t=f(),l=s("main"),u=s("div"),y=s("div"),w=s("h1"),w.textContent="Keyboard Accordion",q=f(),b=s("h2"),b.textContent="Play the diatonic button accordion with your computer keyboard!",g=f(),v=s("div"),$=s("div"),k=s("div"),_=s("h3"),_.textContent="Tuning",x=f(),C=s("select"),E=s("option"),E.innerHTML="<h2>FBâ™­Eâ™­ (Fa)</h2>",A=s("option"),A.innerHTML="<h2>GCF (Sol) Not yet</h2>",B=s("option"),B.innerHTML="<h2>EAD (Mi) Not yet</h2>",T=f(),D=s("div"),D.innerHTML="<h3>How to play</h3> \n          <ul><li>Hold down <kbd>1</kbd> to push the bellows. Default is pull.</li> \n            <li>Row 1 starts with <kbd>z</kbd> and ends with <kbd>,</kbd> (comma)</li> \n            <li>Row 2 starts with <kbd>a</kbd> and ends with <kbd>&#39;</kbd> (apostrophe)</li> \n            <li>Row 3 starts with <kbd>w</kbd> and ends with <kbd>[</kbd> (left bracket)</li></ul>",F=f(),G=s("div"),L=s("h3"),L.textContent="Scales",j=f(),M=s("button"),M.textContent="Bâ™­ Scale",O=f(),H=s("div"),H.innerHTML='<h3>Credits</h3> \n          <p>Made with ðŸ’¾ by <a href="https://tania.dev" target="_blank">Tania</a>.<br/> \n            <a href="https://github.com/taniarascia/accordion" target="_blank">Open source</a>.</p>',N=f(),P=s("div"),S=s("div"),R=s("h3"),R.textContent="Notes being played",z=f(),K=s("div");for(let e=0;e<ae.length;e+=1)ae[e].c();I=f(),J=s("div"),Q=s("div"),Q.innerHTML='<div class="banner">This app is only available on a desktop!</div>',U=f(),V=s("h2"),W=d(n[0]),Z=f(),te=s("div");for(let e=0;e<de.length;e+=1)de[e].c();var e,o,r,c;le=f(),ue=s("div"),ue.innerHTML="<h4>Bellows <code>âž”</code></h4>",E.__value="fbe",E.value=E.__value,E.selected=!0,A.__value="gcf",A.value=A.__value,A.disabled=!0,B.__value="gcf",B.value=B.__value,B.disabled=!0,m($,"class","flex"),m(v,"class","information"),m(K,"class","currently-playing"),m(P,"class","information desktop-only"),m(y,"class","information-side"),m(Q,"class","mobile-only"),m(V,"class","desktop-only direction"),m(te,"class","desktop-only accordion-layout"),m(ue,"class","desktop-only"),e=ue,o="justify-content",null===(r="flex-end")?e.style.removeProperty(o):e.style.setProperty(o,r,c?"important":""),m(J,"class","keyboard-side"),m(u,"class","layout")},m(e,o){c(e,t,o),c(e,l,o),r(l,u),r(u,y),r(y,w),r(y,q),r(y,b),r(y,g),r(y,v),r(v,$),r($,k),r(k,_),r(k,x),r(k,C),r(C,E),r(C,A),r(C,B),r(v,T),r(v,D),r(v,F),r(v,G),r(G,L),r(G,j),r(G,M),r(v,O),r(v,H),r(y,N),r(y,P),r(P,S),r(S,R),r(S,z),r(S,K);for(let e=0;e<ae.length;e+=1)ae[e].m(K,null);r(u,I),r(u,J),r(J,Q),r(J,U),r(J,V),r(V,W),r(J,Z),r(J,te);for(let e=0;e<de.length;e+=1)de[e].m(te,null);r(J,le),r(J,ue),re||(ce=[p(document.body,"keypress",n[2]),p(document.body,"keyup",n[3]),p(document.body,"mouseup",n[5]),p(M,"click",n[6])],re=!0)},p(e,[n]){if(2&n){let t;for(ie=Object.entries(e[1]),t=0;t<ie.length;t+=1){const o=ee(e,ie,t);ae[t]?ae[t].p(o,n):(ae[t]=ne(o),ae[t].c(),ae[t].m(K,null))}for(;t<ae.length;t+=1)ae[t].d(1);ae.length=ie.length}if(1&n&&h(W,e[0]),19&n){let t;for(se=X,t=0;t<se.length;t+=1){const o=Y(e,se,t);de[t]?de[t].p(o,n):(de[t]=oe(o),de[t].c(),de[t].m(te,null))}for(;t<de.length;t+=1)de[t].d(1);de.length=se.length}},i:e,o:e,d(e){e&&i(t),e&&i(l),a(ae,e),a(de,e),re=!1,o(ce)}}}function ue(e,n,t){const o=new(window.AudioContext||window.webkitAudioContext),l=o.createGain();l.gain.value=.1,l.connect(o.destination);let u="pull",r={};function c(e){const{frequency:n}=W[e],t=o.createOscillator();return t.type="square",t.connect(l),t.frequency.value=n,t.start(),{oscillator:t}}function i(e){const{oscillator:n}=r[e];n.stop()}function a(e){if(u!==e){t(0,u=e);const n={...r};for(const[t,o]of Object.entries(r)){o.oscillator.stop(),delete n[t];const l=`${t.split("-")[0]}-${t.split("-")[1]}-${e}`,{oscillator:u}=c(l);n[l]={oscillator:u,...W[l]}}t(1,r=n)}}function s(e){if(!r[e]){const{oscillator:n}=c(e);t(1,r[e]={oscillator:n,...W[e]},r)}}async function d(e){for(const n of e)if(!r[n]){const{oscillator:e}=c(n);t(1,r[n]={oscillator:e,...W[n]},r)}var n;await(n=500,new Promise((e=>setTimeout(e,n))));for(const n of e){i(n);const e={...r};delete e[n],t(1,r=e)}}return[u,r,function(e){if("1"===e.key)return void a("push");const n=`${e.key}`.toLowerCase()||e.key,t=F[n];if(t){const{row:e,column:n}=t;s(`${e}-${n}-${u}`)}},function(e){if("1"===e.key)return void a("pull");const n=`${e.key}`.toLowerCase()||e.key,o=F[n];if(o){const{row:e,column:n}=o,l=`${e}-${n}-${u}`;if(r[l]){i(l);const e={...r};delete e[l],t(1,r=e)}}},e=>{s(e)},()=>{for(const[e,n]of Object.entries(r))n.oscillator.stop();t(1,r={})},async()=>{const e=[...U].reverse();e.shift();const n=[...U,...e];for(const e of n)await d(e)},({id:e})=>e.includes(u)]}return new class extends class{$destroy(){!function(e,n){const t=e.$$;null!==t.fragment&&(o(t.on_destroy),t.fragment&&t.fragment.d(n),t.on_destroy=t.fragment=null,t.ctx=[])}(this,1),this.$destroy=e}$on(e,n){const t=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return t.push(n),()=>{const e=t.indexOf(n);-1!==e&&t.splice(e,1)}}$set(e){var n;this.$$set&&(n=e,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}{constructor(e){super(),D(this,e,ue,le,u,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
